@page "/test"
@inject HttpClient Http
@using BlazorIron.Shared

<PageTitle>Config</PageTitle>

<h1>Config</h1>

<p>Motore 1: <input @bind="servoInfo.Angle1" /> </p>
<p>Motore 2: <input @bind="servoInfo.Angle2" /> </p>
<p>Min pulse: <input @bind="servoInfo.MinPulse" /> </p>
<p>Max pulse: <input @bind="servoInfo.MaxPulse" /> </p>

<p><button class="btn btn-primary" @onclick="IncrementCount">Click me</button></p>
<p><button class="btn btn-primary" @onclick="LedOn">Led on</button><button class="btn btn-primary" @onclick="LedOff">Led
    off</button></p>
<p><button class="btn btn-primary" @onclick="PowerOff">Power off</button><button class="btn btn-primary" @onclick="Reboot">Reboot</button></p>

@code {
    private ServoInfo servoInfo = new ServoInfo() { Angle1 = 20 , Angle2 = 160 };

    private async void IncrementCount()
    {
        using var response = await Http.PostAsJsonAsync("IronMan/MoveServo", servoInfo);


        //article = await response.Content.ReadFromJsonAsync<Article>();

    }

    private async void LedOn()
    {

        Http.GetAsync("IronMan/LedOn");

        //article = await response.Content.ReadFromJsonAsync<Article>();

    }

    private async void LedOff()
    {
        Http.GetAsync("IronMan/LedOff");

        //article = await response.Content.ReadFromJsonAsync<Article>();

    }

    private async void PowerOff()
    {

        Http.GetAsync("IronMan/PowerOff");

        //article = await response.Content.ReadFromJsonAsync<Article>();

    }

    private async void Reboot()
    {
        Http.GetAsync("IronMan/Reboot");

        //article = await response.Content.ReadFromJsonAsync<Article>();

    }
}
